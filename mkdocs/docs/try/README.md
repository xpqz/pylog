# PyLog Web REPL Assets

This directory contains assets for the PyLog web REPL that runs in browsers via Pyodide.

## Directory Structure

```
try/
├── assets/                  # Web wheel assets (auto-generated by CI)
│   ├── pylog-VERSION-web.whl   # PyLog web wheel (minimal dependencies)
│   ├── lark-VERSION.whl        # Lark parser dependency
│   ├── checksums.txt           # SHA256 checksums for integrity
│   └── manifest.json           # Asset metadata and version info
└── README.md               # This file
```

## Asset Generation

Assets are automatically generated by the "Web Wheel Release" GitHub Actions workflow:

- **Trigger**: On release publication or manual workflow dispatch
- **Process**:
  1. Builds PyLog web wheel (minimal dependencies, lark only)
  2. Downloads compatible lark wheel
  3. Generates checksums and manifest
  4. Commits assets to repository for GitHub Pages serving

## Usage in Web Worker

```javascript
// Load PyLog web wheel in Pyodide worker
await micropip.install('./assets/pylog-VERSION-web.whl');

// Import PyLog modules
const { parse_query, Engine, Program, pretty } = pyodide.pyimport('prolog');
```

## Asset Integrity

- All wheels include SHA256 checksums in `checksums.txt`
- `manifest.json` contains version and asset mapping
- Assets are cached by GitHub Pages with proper headers

## Manual Asset Update

If needed, assets can be updated manually:

1. Build web wheels: `./build-wheels.sh`
2. Copy to assets directory with version suffix
3. Generate checksums: `sha256sum *.whl > checksums.txt`
4. Update manifest.json with new version/files
5. Commit and push changes

## Version Management

- Asset filenames include version numbers for cache busting
- `manifest.json` provides current version mapping
- Worker code should read manifest to determine current asset URLs