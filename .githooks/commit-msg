#!/usr/bin/env bash
set -euo pipefail

# Commit message policy enforcement
# - Do not mention Claude, Anthropic, or AI assistance (coderules.md)

msg_file=$1
msg=$(cat "$msg_file")

# Case-insensitive grep for prohibited terms
if echo "$msg" | grep -E -i -q "(claude|anthropic|ai assistance|ai-assisted|ai[- ]generated|co-authored-by:.*claude|co-authored-by:.*anthropic)"; then
  echo "\nCommit message contains prohibited AI attribution terms." >&2
  echo "Blocked terms: Claude, Anthropic, 'AI assistance' (and variants)." >&2
  echo "Please remove AI references from the commit message per coderules.md." >&2
  exit 1
fi

exit 0

